---
sssd_packages:
  - sssd
  - sssd-tools
  - sssd-dbus
  - libpam-sss
  - libnss-sss

sssd_config: {}
sssd_config_file: /etc/sssd/sssd.conf
sssd_mkhomedir: false

sssd_enable_activatable_responders: >-
  {{ ansible_distribution == 'Ubuntu' and ansible_distribution_version is version('20.04', '>=') or
  ansible_distribution == 'Debian' and ansible_distribution_version is version('11', '>=') }}
sssd_disabled_activatable_responders:
  - nss
  - pam
  - pam-priv

# sssd ldap config example:
# sssd_config:
#   sssd:
#     config_file_version: "2"
#     services: ["nss", "pam"]
#     domains: "LDAP"
#   nss:
#     filter_users: "root"
#     filter_groups: "root"
#   domain/LDAP:
#     id_provider: "ldap"
#     auth_provider: "ldap"
#     ldap_uri: "ldaps://{{ ldap_auth_host }}:{{ ldap_auth_port }}"
#     ldap_id_use_start_tls: "true"
#     ldap_search_base: "{{ ldap_auth_base }}"
#     ldap_tls_reqcert: "allow"
#     cache_credentials: "true"
#     enumerate: "false"
# sssd_mkhomedir: true
